
\RequirePackage{listings}
\RequirePackage{amssymb}
\RequirePackage{xcolor}
\RequirePackage{bold-extra}

\definecolor{thegraygray}{rgb}{0.5,0.5,0.5}
\definecolor{ocaml-bg}{rgb}{0.9,0.9,0.9}

\lstdefinelanguage{why3}
{
mathescape=true,%
aboveskip=1pt,%
basicstyle=\ttfamily,%
morekeywords=[1]{predicate,constant,function,goal,type,use,sig,scope,%
import,theory,end,module,in,syntax,old,meta,exception,struct,return,%
mutable,invariant,model,requires,ensures,raises,returns,reads,writes,diverges,%
variant,let,val,while,for,loop,abstract,private,any,assume,check,assert,%
begin,rec,clone,if,then,else,ghost,true,false,do,done,try,raise,absurd,reg,%
axiom,lemma,export,forall,exists,match,with,and,inductive,coinductive,fun},%
keywordstyle=\bfseries,%
otherkeywords={},%
commentstyle=\itshape\color{thegraygray},%
columns=[l]fullflexible,%
sensitive=true,%
morecomment=[s]{(*}{*)},%
escapeinside={*?}{?*},%
keepspaces=true,%
literate=%
}

\lstnewenvironment{why3old}{\lstset{language=why3,caption=WhyML,aboveskip=-1pt}}{}
\lstnewenvironment{why3}{\lstset{language=why3,caption={WhyML\vspace*{-2em}},aboveskip=-1em}}{}
\lstnewenvironment{why3i}{\lstset{language=why3,caption=WhyML
    (internal),aboveskip=0pt}}{}
\lstnewenvironment{drv}{\lstset{language=why3,caption={Driver\vspace*{-2em}},aboveskip=-1em}}{}

\lstnewenvironment{kidold}{\lstset{language=why3,caption=KidML,aboveskip=0pt}}{}

\lstnewenvironment{kid}{\lstset{language=why3,caption={KidML\vspace*{-2em}},aboveskip=-1em}}{}

\lstnewenvironment{camlold}{\lstset{language=why3,caption=OCaml,aboveskip=0pt}}{}
\lstnewenvironment{caml}{\lstset{language=why3,caption={OCaml\vspace*{-2em}},aboveskip=-1em}}{}

\lstnewenvironment{camleold}{\lstset{language=why3,caption=OCaml
    (extracted),aboveskip=0pt}}{}

\lstnewenvironment{camle}{\lstset{language=why3,caption={OCaml\vspace*{-2em}}
    (extracted),aboveskip=-1em}}{}

\lstnewenvironment{why3small}
{\lstset{language=why3,basicstyle=\ttfamily\scriptsize}}{}
\lstnewenvironment{java}{\lstset{language=Java,basicstyle=\ttfamily,caption=Java,aboveskip=0pt}}{}

\newcommand{\whyf}[1]{\lstinline[language=why3]{#1}}
\let\of\whyf

\lstdefinelanguage{mli}
{
mathescape=true,%
aboveskip=1pt,%
basicstyle=\ttfamily,%
morekeywords=[1]{predicate,constant,function,goal,type,use,%
import,theory,end,module,in,syntax,old,checks,%
mutable,invariant,model,requires,ensures,raises,returns,reads,writes,diverges,%
variant,let,val,while,for,loop,abstract,private,any,assume,check,assert,%
begin,rec,clone,if,then,else,ghost,true,false,do,done,try,raise,absurd,%
axiom,lemma,export,forall,exists,match,with,and,inductive,coinductive,fun,%
ephemeral,modifies},%
keywordstyle=\color{blue},%
otherkeywords={},%
commentstyle=\itshape\color{thegraygray},%
columns=[l]fullflexible,%
sensitive=true,%
morecomment=[s]{(**}{*)},%
escapeinside={*?}{?*},%
keepspaces=true,
literate=%
}

\lstnewenvironment{mliold}{\lstset{language=mli}}{}

\lstnewenvironment{mli}{\lstset{language=mli}}{}

\lstnewenvironment{mlismallold}
{\lstset{language=mli,basicstyle=\ttfamily\small}}{}

\lstnewenvironment{mlismall}
{\lstset{language=mli,basicstyle=\ttfamily\small}}{}
